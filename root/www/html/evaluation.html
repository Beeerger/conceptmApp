<!DOCTYPE html>
<html>
    <!-- this html is a demo of the backend student editor. Use together with the networks_teacher.html -->
    <head> 
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Evaluation</title>

       <!-- //Download the necessary resources from unpkg  nicer comment-->
        <script
          type="text/javascript"
          src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
        ></script>
        <script 
          type="text/javascript" 
            src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js">
        </script>
        <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />

    </head>

    <body>
      <!-- import for the canvas stylisation -->
      <link rel="stylesheet" href="../css/evaluation.css" media="screen"/>
      <div class="box">
        <div class="row header">
        <fieldset style="text-align: center;">
          <label for= "taskName"> Task Name </label>
          <input type="text" id="taskName" placeholder="Name"/> <br><br>  
        Maps scanned: <span id="mapsScanned"></span>

        <select name="Graph type" id="type-select" onchange = "changeContent()">
          <option value="nodes"> nodesPercentage</option>
          <option value="edges"> edgesPercentage</option>
          <option value="correctEdges"> correctEdgesPercentage</option>
        </select>

        </fieldset>


        <div id="nodesPercentageDiv" style="display: none">
          nodesPercentage: <span id="nodesPercentage"></span>
        </div>

        <div id="edgesPercentageDiv" style="display: none">
          edgesPercentage: <span id="edgesPercentage"></span>
        </div>

        <div id="correctEdgesPercentageDiv" style="display: none">
          correctEdgesPercentage: <span id="correctEdgesPercentage"></span>
        </div>
      </div>

        <div class="row content" id="visualization" style="height: 50%; width: 100%"></div>

        <div  class="row footer" id="button_container">
          <!-- Import/Export buttons -->
          <div id="buttonContainer">
            <button id="button" onclick = importResultFromQr()> Import Student Result </button>
            <button id="button" onclick = importTestResult()> Import Test Result </button>
            <button id="button" onclick = exportResultsToQr()> Export Results </button>
          </div>

          <div id="buttonContainer">
            <button id="button" onclick = evaluateResults()> Evaluate Results </button>
            <button id="button" onclick = "initialize(); graph.resetGraph();"> Reset Results </button>
          </div>

          <!-- Info Button and the switch editor buttons, for debugging purposes-->
          <div id="buttonContainer">
            <button id="button" onclick = network.showInfo()> Info </button>
          </div>

          <!-- Info Button and the switch editor buttons, for debugging purposes-->
          <div id="buttonContainer">
            <button type=“button”><a href="networks_teacher.html"> Teacher </a></button>
          </div>
      </div>

  </div>
      <script source = "jquery-3.6.1.min.js"></script>
      <script type='text/javascript' src = "../js/vis_network.js">  // network implementation </script>
      <script type='text/javascript' src = "../js/qrscanner.js">    // qr code implementation </script>
      <script type='text/javascript' src = "../js/evaluation.js">  // evaluation implementation </script>

      <script type='text/javascript' src = "../js/evaluation_graph.js">  // graph implementation </script>

      <!-- here lays some extra js code for the .html, that does not handle the core evaluation functionality -->
      <script>
        function changeContent() {
          let nodesContent = document.getElementById("nodesPercentageDiv");
          let edgesContent = document.getElementById("edgesPercentageDiv");
          let correctEdgesContent = document.getElementById("correctEdgesPercentageDiv");
          eraseEverything();
          let selectedOption = document.getElementById("type-select").value;

          switch(selectedOption){
            case "nodes":
              nodesContent.style.display = "block";
              break
            case "edges": 
              edgesContent.style.display = "block";
              break
            case "correctEdges":
              correctEdgesContent.style.display = "block";
            break
          }

          function eraseEverything() {
              
            let nodesContent = document.getElementById("nodesPercentageDiv");
            let edgesContent = document.getElementById("edgesPercentageDiv");
            let correctEdgesContent = document.getElementById("correctEdgesPercentageDiv");

            nodesContent.style.display = "none";
            edgesContent.style.display = "none";
            correctEdgesContent.style.display = "none";
          }
        }
        
        let graph = new EvaluationGraph(false);

        function updateGraph(evaluationData) {
          graph.addBar(evaluationData.nodesPercentage);
        }

      </script>
      <!-- here the evaluation methods -->
      <script>

        var mapsScanned = 0;
        var nodesPercentage = 0;
        var edgesPercentage = 0;
        var correctEdgesPercentage = 0;

        initialize()

      </script>

        <!-- black magic, very important, such danger -->
        <script type="text/javascript" src="../cordova.js"></script>

    </body>
</html>